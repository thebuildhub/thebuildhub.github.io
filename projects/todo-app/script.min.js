function createList(e){return{id:Date.now().toString(),name:e,tasks:[]}}function createTask(e){return{id:Date.now().toString(),name:e,complete:!1}}function saveAndRender(){save(),render()}function save(){localStorage.setItem(LOCAL_STORAGE_LIST_KEY,JSON.stringify(lists)),localStorage.setItem(LOCAL_STORAGE_SELECTED_LIST_ID_KEY,selectedListId)}function render(){clearElement(listContainer),renderList();const e=lists.find(e=>e.id===selectedListId);null==e?listDisplayContainer.style.display="none":(listDisplayContainer.style.display="",listTitle.innerText=e.name,renderTaskCount(e),clearElement(taskContainer),renderTasks(e))}function renderTasks(e){e.tasks.forEach(e=>{const t=document.importNode(taskTemplate.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const s=t.querySelector("label");s.htmlFor=e.id,s.append(e.name),taskContainer.appendChild(t)})}function renderTaskCount(e){const t=e.tasks.filter(e=>!e.complete).length,n=1===t?"task":"tasks";listCount.innerText=`${t} ${n} remaining`}function renderList(){lists.forEach(e=>{const t=document.createElement("li");t.dataset.ListId=e.id,t.classList.add("list-item"),t.innerText=e.name,e.id===selectedListId&&t.classList.add("active-item"),listContainer.appendChild(t)})}function clearElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const listContainer=document.querySelector("[data-list]"),newListForm=document.querySelector("[data-new-list-form]"),newListInput=document.querySelector("[data-new-list-input]"),deleteListBtn=document.querySelector("[data-delete-list-button]"),listDisplayContainer=document.querySelector("[data-list-display-container]"),listTitle=document.querySelector("[data-list-title]"),listCount=document.querySelector("[data-list-count]"),taskContainer=document.querySelector("[data-task]"),taskTemplate=document.querySelector("#task-template"),newTaskForm=document.querySelector("[data-new-task-form]"),newTaskInput=document.querySelector("[data-new-task-input]"),clearCompletedTaskBtn=document.querySelector("[data-clear-completed-task-button]"),LOCAL_STORAGE_LIST_KEY="task.list",LOCAL_STORAGE_SELECTED_LIST_ID_KEY="task.selectedListId";let lists=JSON.parse(localStorage.getItem(LOCAL_STORAGE_LIST_KEY))||[],selectedListId=localStorage.getItem(LOCAL_STORAGE_SELECTED_LIST_ID_KEY);listContainer.addEventListener("click",e=>{"li"===e.target.tagName.toLowerCase()&&(selectedListId=e.target.dataset.ListId,saveAndRender())}),taskContainer.addEventListener("click",e=>{if("input"===e.target.tagName.toLowerCase()){const t=lists.find(e=>e.id===selectedListId),n=t.tasks.find(t=>t.id===e.target.id);n.complete=e.target.checked,save(),renderTaskCount(t)}}),clearCompletedTaskBtn.addEventListener("click",e=>{const t=lists.find(e=>e.id===selectedListId);t.tasks=t.tasks.filter(e=>!e.complete),saveAndRender()}),deleteListBtn.addEventListener("click",e=>{lists=lists.filter(e=>e.id!==selectedListId),selectedListId=null,saveAndRender()}),newListForm.addEventListener("submit",e=>{e.preventDefault();const t=newListInput.value;if(null==t||""===t)return;const n=createList(t);newListInput.value=null,lists.push(n),saveAndRender()}),newTaskForm.addEventListener("submit",e=>{e.preventDefault();const t=newTaskInput.value;if(null==t||""===t)return;const n=createTask(t);newTaskInput.value=null;const s=lists.find(e=>e.id===selectedListId);s.tasks.push(n),saveAndRender()}),render();const infoBtn=document.querySelector(".info-btn"),infoContent=document.querySelector(".info-content"),infoHideBtn=document.querySelector(".info-hide-btn");infoBtn.addEventListener("click",e=>{infoContent.style.display="block",infoHideBtn.style.display="block"}),infoHideBtn.addEventListener("click",e=>{infoContent.style.display="none",infoHideBtn.style.display="none"});